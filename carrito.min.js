class Carrito{#a=null;#b=null;constructor(t,e=!0){this.#a=t,this.#b=e,this.#b&&null===sessionStorage.getItem(this.#a)?sessionStorage.setItem(this.#a,""):null===sessionStorage.getItem(this.#a)&&localStorage.setItem(this.#a,"")}addCarrito(t,e){if(!this.#c(t))return console.warn("validar que el objeto producto que por lo menos tenga los siguientes campos: nombre (name), precio (price), img");let i=this.#d();if(this.#e(t)){let{producto:r,indexProduct:a}=this.#f(t),n=r.cantidad+e;r.cantidad=n,r.total=t.precio*n,i[a]=r}else{let o=t.precio*e;i.push({product:t,cantidad:e,total:o})}this.#g(i)}deleteProduct(t,e=null){if(!this.#c(t))return console.warn("validar que el objeto producto que por lo menos tenga los siguientes campos: nombre (name), precio (price), img");let i=this.#d();if(this.#e(t)){let{producto:r,indexProduct:a}=this.#f(t);if(e){let n=r.cantidad-e;r.cantidad=n,r.total=t.precio*n,i[a]=r}else i.splice(a,1);this.#g(i)}else console.warn("no existe producto")}getCarrito(){let t=this.#d(),e=0;return t.forEach(t=>{e+=t.total}),{carrito:t,totalProducts:e}}limpiarCarrito(){this.#b?sessionStorage.setItem(this.#a,""):localStorage.setItem(this.#a,"")}#g(t){let e=JSON.stringify(t);null!==sessionStorage.getItem(this.#a)?sessionStorage.setItem(this.#a,e):null!==localStorage.getItem(this.#a)&&localStorage.setItem(this.#a,e)}#e(i){let r=this.#d();return!!r.find(t=>JSON.stringify(t.product)===JSON.stringify(i))}#f(a){let n=this.#d(),o=null,s=n.find((t,e)=>(o=e,JSON.stringify(t.product)===JSON.stringify(a)));return{producto:s,indexProduct:o}}#d(){let p=sessionStorage.getItem(this.#a);return p||(p=localStorage.getItem(this.#a)),p?JSON.parse(p):[]}#c(l){return l&&("number"==typeof l.precio||"number"==typeof l.price)}}